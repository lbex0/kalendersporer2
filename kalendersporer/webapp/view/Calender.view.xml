<mvc:View
    controllerName="kalendersporer.controller.Calender"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:unified="sap.ui.unified"
    xmlns="sap.m">

    <VBox class="sapUiSmallMargin" fitContainer="true">

        <OverflowToolbar>
            <SearchField
                id="searchField"
                width="300px"
                placeholder="Search people..."
                liveChange="onSearchPeople" />

            <Select
                id="appointmentTypeFilter"
                change="onFilterAppointments"
                width="200px"
                autoAdjustWidth="true"
                forceSelection="false"
                placeholder="Filter by type">
                <items>
                    <core:Item key="" text="All Types" />
                    <core:Item key="Bursdag" text="Bursdag" />
                    <core:Item key="Fravær" text="Fravær" />
                    <core:Item key="Ferie" text="Ferie" />
                    <core:Item key="Fridager" text="Fridager" />
                </items>
            </Select>

            <Button icon="sap-icon://undo" tooltip="Reset Filters" press="onResetFilters" />
            <ToolbarSpacer />
            <Text text="Logged in as: {user>/username}" visible="{= !!${user>/username}}" />
            <Button icon="sap-icon://log" tooltip="Logout" text="Logout" press="onLogout" />
            <Button icon="sap-icon://palette" tooltip="Toggle Theme" press="onToggleTheme" />
        </OverflowToolbar>

            <PlanningCalendar
                id="PC1"
                startDate="{/startDate}"
                rows="{/people}"
                appointmentsVisualization="Filled"
                appointmentSelect="handleAppointmentSelect"
                showEmptyIntervalHeaders="false"
                stickyHeader="true"
                showWeekNumbers="true"
                width="100%"
                height="100%">

                <rows>
                    <PlanningCalendarRow
                        icon="{pic}"
                        title="{name}"
                        text="{role}"
                        appointments="{appointments}"
                        intervalHeaders="{headers}">

                        <appointments>
                            <unified:CalendarAppointment
                                templateShareable="false"
                                startDate="{start}"
                                endDate="{end}"
                                icon="{pic}"
                                title="{title}"
                                text="{info}"
                                type="{type}"
                                tentative="{tentative}" />
                        </appointments>

                        <intervalHeaders>
                            <unified:CalendarAppointment
                                templateShareable="false"
                                startDate="{start}"
                                endDate="{end}"
                                icon="{pic}"
                                title="{title}"
                                type="{type}" />
                        </intervalHeaders>
                    </PlanningCalendarRow>
                </rows>
            </PlanningCalendar>
    </VBox>
</mvc:View>
